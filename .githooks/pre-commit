#!/bin/sh
md_files=$(git diff --cached --name-only --diff-filter=ACM -- '*.md')
if [ -n "$md_files" ]; then
  npm run preexpand -- $md_files && git add $md_files && npx -y markdownlint-cli $md_files
fi
flake8 --exclude node_modules
files=$(git diff --cached --name-only --diff-filter=ACM -- 'docs/ai-research/*.md')
[ -z "$files" ] || python scripts/lint_research_docs.py $files
